steps:
    - id: "Go Genarate"
      name: "gcr.io/cloud-builders/go"
      args: ["generate"]
      env: ['PROJECT_ROOT=github.com/gabriel301/codeeducation/CI/src']
    
    - id: "Go Test"
      name: "gcr.io/cloud-builders/go"
      args: ["test","."]
      env: ['PROJECT_ROOT=github.com/gabriel301/codeeducation/CI/src']

    - id: "Go Build/Install"
      name: 'gcr.io/cloud-builders/go'
      args: ['install', '-a', '-ldflags', "'-s'", '-installsuffix', 'cgo', 'github.com/gabriel301/codeeducation/CI/src']
      env: [
            'PROJECT_ROOT=github.com/gabriel301/codeeducation/CI/src',
            'CGO_ENABLED=0',
            'GOOS=linux'
          ]
    - id: "Gerando Imagem"
      name: 'gcr.io/cloud-builders/docker'
      args: ['build','-t','gcr.io/$PROJECT_ID/desafio-ci:latest','.']
images: ['gcr.io/$PROJECT_ID/desafio-ci:latest']
    
